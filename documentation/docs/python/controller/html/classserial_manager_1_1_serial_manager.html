<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smock: serialManager.SerialManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Smock
   </div>
   <div id="projectbrief">Service Script</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceserial_manager.html">serialManager</a></li><li class="navelem"><a class="el" href="classserial_manager_1_1_serial_manager.html">SerialManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classserial_manager_1_1_serial_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">serialManager.SerialManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the class that manages the connection between the computer and the serial device.  
 <a href="classserial_manager_1_1_serial_manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7bfabdb96a1dc3ec2c250e4c56e6a10c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#a7bfabdb96a1dc3ec2c250e4c56e6a10c">__init__</a> (self, queue_manager, user_manager)</td></tr>
<tr class="memdesc:a7bfabdb96a1dc3ec2c250e4c56e6a10c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the constructor of the <a class="el" href="classserial_manager_1_1_serial_manager.html" title="This is the class that manages the connection between the computer and the serial device.">SerialManager</a>.  <a href="#a7bfabdb96a1dc3ec2c250e4c56e6a10c">More...</a><br /></td></tr>
<tr class="separator:a7bfabdb96a1dc3ec2c250e4c56e6a10c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0835ed95422ea38a58251aa9a8cc6825"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#a0835ed95422ea38a58251aa9a8cc6825">write_to_controller</a> (self, message)</td></tr>
<tr class="memdesc:a0835ed95422ea38a58251aa9a8cc6825"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a message to the serial device.  <a href="#a0835ed95422ea38a58251aa9a8cc6825">More...</a><br /></td></tr>
<tr class="separator:a0835ed95422ea38a58251aa9a8cc6825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b68b0396e8387c6930f00e3d49364b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#af3b68b0396e8387c6930f00e3d49364b">fill_queue</a> (self)</td></tr>
<tr class="memdesc:af3b68b0396e8387c6930f00e3d49364b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the bytes that are send from the serial device.  <a href="#af3b68b0396e8387c6930f00e3d49364b">More...</a><br /></td></tr>
<tr class="separator:af3b68b0396e8387c6930f00e3d49364b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a90050aa39382eb45eab44160d7f815"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#a8a90050aa39382eb45eab44160d7f815">find_serial_device</a> (self)</td></tr>
<tr class="memdesc:a8a90050aa39382eb45eab44160d7f815"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function searches for a serial device.  <a href="#a8a90050aa39382eb45eab44160d7f815">More...</a><br /></td></tr>
<tr class="separator:a8a90050aa39382eb45eab44160d7f815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d33e389f89d9f2e120493a1f618c816"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#a2d33e389f89d9f2e120493a1f618c816">send_os_to_controller</a> (self)</td></tr>
<tr class="memdesc:a2d33e389f89d9f2e120493a1f618c816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the information of the OS name to the serial device.  <a href="#a2d33e389f89d9f2e120493a1f618c816">More...</a><br /></td></tr>
<tr class="separator:a2d33e389f89d9f2e120493a1f618c816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac634a6434ed1cf8b8c653a7985aff78"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserial_manager_1_1_serial_manager.html#aac634a6434ed1cf8b8c653a7985aff78">send_multiple_user_to_controller</a> (self)</td></tr>
<tr class="memdesc:aac634a6434ed1cf8b8c653a7985aff78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the serial device the information, if the system is a system with multiple user or not.  <a href="#aac634a6434ed1cf8b8c653a7985aff78">More...</a><br /></td></tr>
<tr class="separator:aac634a6434ed1cf8b8c653a7985aff78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the class that manages the connection between the computer and the serial device. </p>
<p>It reads messages from the serial device and stores them in a queue. It also writes messages to the serial device. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7bfabdb96a1dc3ec2c250e4c56e6a10c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bfabdb96a1dc3ec2c250e4c56e6a10c">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>queue_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the constructor of the <a class="el" href="classserial_manager_1_1_serial_manager.html" title="This is the class that manages the connection between the computer and the serial device.">SerialManager</a>. </p>
<p>It contains a mutex so it's not possible that multiple threads communicate with the serial device. At first the serial device will be initialized, but the port is not known yet. The baudrate as well as the timeout is set for the serial device. The timeout is for reading from the serial device, when the timeout expires, it stops reading from the serial device. The queue manager is necessary for storing received messages and the user manager has the information of how many users are using this program on the Client/Computer side. This is necessary to know, because the serial device acts differently according to the number of users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue_manager</td><td>This is the queue_manager where the messages are stored, which the <a class="el" href="classserial_manager_1_1_serial_manager.html" title="This is the class that manages the connection between the computer and the serial device.">SerialManager</a> receives </td></tr>
    <tr><td class="paramname">user_manager</td><td>This is the user_manager, that is sending the information of how many users are active. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af3b68b0396e8387c6930f00e3d49364b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b68b0396e8387c6930f00e3d49364b">&#9670;&nbsp;</a></span>fill_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.fill_queue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the bytes that are send from the serial device. </p>
<p>It acquires a mutex if it's not acquired yet. Then it reads the first letter as byte. This will be saved as command code. After that it reads all the other bytes that the serial device sends. When the serial device sends a b"!" it means that this is the end of the message that is sent. Then the command code and the text are saved as Message. This function should be called by a separate thread. Because it's an endless loop. </p>

</div>
</div>
<a id="a8a90050aa39382eb45eab44160d7f815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a90050aa39382eb45eab44160d7f815">&#9670;&nbsp;</a></span>find_serial_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.find_serial_device </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function searches for a serial device. </p>
<p>At first it looks into the config file for an already known COM port. If the COM port exists and a device is connected to the COM port, the function connects to the serial device and opens the port. If no config is available, the function searches for an available COM port and connects to it. After that it writes it in a config file.</p>
<dl class="section return"><dt>Returns</dt><dd>return True when found a serial device, otherwise false </dd></dl>

</div>
</div>
<a id="aac634a6434ed1cf8b8c653a7985aff78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac634a6434ed1cf8b8c653a7985aff78">&#9670;&nbsp;</a></span>send_multiple_user_to_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.send_multiple_user_to_controller </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the serial device the information, if the system is a system with multiple user or not. </p>

</div>
</div>
<a id="a2d33e389f89d9f2e120493a1f618c816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d33e389f89d9f2e120493a1f618c816">&#9670;&nbsp;</a></span>send_os_to_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.send_os_to_controller </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the information of the OS name to the serial device. </p>
<p>Also sends a number to notify the serial device if the system is used by one person or multiple users. The serial device only wants the first letter OS name. So "W" for Windows and "L" for Linux. The function has a little delay, because this function will be called immediately after opening the port. This prevents that the message is sent to early and the device doesn't read the message. </p>

</div>
</div>
<a id="a0835ed95422ea38a58251aa9a8cc6825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0835ed95422ea38a58251aa9a8cc6825">&#9670;&nbsp;</a></span>write_to_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serialManager.SerialManager.write_to_controller </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a message to the serial device. </p>
<p>The message contains a command code and the text that is send. The message send to the serial device is a byte array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Message that will be written to the serial device </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="serial_manager_8py.html">serialManager.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
