<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smock: device/src/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Smock
   </div>
   <div id="projectbrief">Device</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_820b2b9dd608784780e51ab49715a98b.html">device</a></li><li class="navelem"><a class="el" href="dir_a5d8e4da9cc80025df522d391d7137df.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;inc/hw_memmap.h&quot;</code><br />
<code>#include &quot;inc/hw_ints.h&quot;</code><br />
<code>#include &quot;inc/hw_types.h&quot;</code><br />
<code>#include &quot;inc/hw_adc.h&quot;</code><br />
<code>#include &quot;grlib/grlib.h&quot;</code><br />
<code>#include &quot;grlib/widget.h&quot;</code><br />
<code>#include &quot;grlib/keyboard.h&quot;</code><br />
<code>#include &quot;driverlib/fpu.h&quot;</code><br />
<code>#include &quot;driverlib/pin_map.h&quot;</code><br />
<code>#include &quot;driverlib/debug.h&quot;</code><br />
<code>#include &quot;driverlib/sysctl.h&quot;</code><br />
<code>#include &quot;driverlib/adc.h&quot;</code><br />
<code>#include &quot;driverlib/rom.h&quot;</code><br />
<code>#include &quot;driverlib/interrupt.h&quot;</code><br />
<code>#include &quot;driverlib/gpio.h&quot;</code><br />
<code>#include &quot;driverlib/timer.h&quot;</code><br />
<code>#include &quot;driverlib/udma.h&quot;</code><br />
<code>#include &quot;driverlib/uart.h&quot;</code><br />
<code>#include &quot;usblib/usblib.h&quot;</code><br />
<code>#include &quot;usblib/usbhid.h&quot;</code><br />
<code>#include &quot;usblib/usb-ids.h&quot;</code><br />
<code>#include &quot;usblib/usbcdc.h&quot;</code><br />
<code>#include &quot;usblib/device/usbdevice.h&quot;</code><br />
<code>#include &quot;usblib/device/usbdcomp.h&quot;</code><br />
<code>#include &quot;usblib/device/usbdhid.h&quot;</code><br />
<code>#include &quot;usblib/device/usbdhidkeyb.h&quot;</code><br />
<code>#include &quot;utils/uartstdio.h&quot;</code><br />
<code>#include &quot;utils/ustdlib.h&quot;</code><br />
<code>#include &quot;drivers/buttons.h&quot;</code><br />
<code>#include &quot;<a class="el" href="usb__structs_8h_source.html">usb/usb_structs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="USBSerialDevice_8h_source.html">usb/USBSerialDevice.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="USBKeyboardDevice_8h_source.html">usb/USBKeyboardDevice.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="USBCompDevice_8h_source.html">usb/USBCompDevice.h</a>&quot;</code><br />
<code>#include &quot;energia/SPI.h&quot;</code><br />
<code>#include &quot;energia/Wire.h&quot;</code><br />
<code>#include &quot;<a class="el" href="MFRC522_8h_source.html">rfid/MFRC522.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MFRC522Constants_8h_source.html">rfid/MFRC522Constants.h</a>&quot;</code><br />
<code>#include &quot;energia/Stream.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5ae56cb6a634afce913506ca6db1e0db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5ae56cb6a634afce913506ca6db1e0db">TARGET_IS_BLIZZARD_RB1</a></td></tr>
<tr class="separator:a5ae56cb6a634afce913506ca6db1e0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a887ec76db4f4aa156c159988294a5dc7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7">CommandCode</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a91bbb660ffee15227f9a0a73792eaa7f">SINGLE_USER</a> = '1', 
<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a1bcf9f8d8e8a50733d63588d20bfaec0">ASK_FOR_PW</a> = 'p', 
<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a4e82e5f475aa8266e2fb983667bb3f83">OS_SYSTEM</a> = 'o', 
<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7aa6afed6b88eb0dd02e88319883c1ada0">READ_UID</a> = 'u', 
<br />
&#160;&#160;<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a25f902638ca8552deac6b00f71d72168">HOST_STATUS</a> = 'l', 
<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a3e5928fcfe26233db7178345569b7ab5">USER_QUANTITY</a> = 'q', 
<a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7a960c2b426ae17f0a9cbaa415179e6de0">END_REQUEST</a> = '!'
<br />
 }</td></tr>
<tr class="separator:a887ec76db4f4aa156c159988294a5dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c42c594bb848c81ace2ff29f64dc89"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89">State</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89a13d000b4d7dc70d90239b7430d1eb6b2">START</a>, 
<a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89a6b4af979c9694e48f340397ac08dfd1c">LOCKED</a>, 
<a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89addce3eb76352dcd28468b1a5e7ee2c27">WAIT_FOR_PW</a>, 
<a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89a4ade5a087dd858a01c36ce7ad8f64e36">UNLOCKED</a>, 
<br />
&#160;&#160;<a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89a2ea7e5ce3432a623cdd366c46a0e1675">VALIDATE_HOST_LOCKED</a>
<br />
 }</td></tr>
<tr class="separator:ae9c42c594bb848c81ace2ff29f64dc89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac186ec772710562bab386f3f7d363cf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ac186ec772710562bab386f3f7d363cf2">configureUSB</a> ()</td></tr>
<tr class="separator:ac186ec772710562bab386f3f7d363cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc4540eac008b25ebb9ca83a91fe94d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aadc4540eac008b25ebb9ca83a91fe94d">delay</a> (int ms)</td></tr>
<tr class="memdesc:aadc4540eac008b25ebb9ca83a91fe94d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delays in ms given time.  <a href="#aadc4540eac008b25ebb9ca83a91fe94d">More...</a><br /></td></tr>
<tr class="separator:aadc4540eac008b25ebb9ca83a91fe94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7024f193dde44e5e4628726b4d5e05f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af7024f193dde44e5e4628726b4d5e05f">ControlHandler</a> (void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgValue, void *pvMsgData)</td></tr>
<tr class="memdesc:af7024f193dde44e5e4628726b4d5e05f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the default USB-Events of the serial device.  <a href="#af7024f193dde44e5e4628726b4d5e05f">More...</a><br /></td></tr>
<tr class="separator:af7024f193dde44e5e4628726b4d5e05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e60edf201aebcf91f67dfab8235753"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a44e60edf201aebcf91f67dfab8235753">USBEventHandler</a> (void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgParam, void *pvMsgData)</td></tr>
<tr class="memdesc:a44e60edf201aebcf91f67dfab8235753"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the default USB-Events of the keyboard device.  <a href="#a44e60edf201aebcf91f67dfab8235753">More...</a><br /></td></tr>
<tr class="separator:a44e60edf201aebcf91f67dfab8235753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da4e5e6b4d6b2a97dfea3652276a7dc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6da4e5e6b4d6b2a97dfea3652276a7dc">USBKeyboardHandler</a> (void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgParam, void *pvMsgData)</td></tr>
<tr class="memdesc:a6da4e5e6b4d6b2a97dfea3652276a7dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the keyboard events of the keyboard device.  <a href="#a6da4e5e6b4d6b2a97dfea3652276a7dc">More...</a><br /></td></tr>
<tr class="separator:a6da4e5e6b4d6b2a97dfea3652276a7dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5880acfab168e16e2a4f7216a99d2a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ace5880acfab168e16e2a4f7216a99d2a">TxHandler</a> (void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgValue, void *pvMsgData)</td></tr>
<tr class="memdesc:ace5880acfab168e16e2a4f7216a99d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the transmit events of the serial device.  <a href="#ace5880acfab168e16e2a4f7216a99d2a">More...</a><br /></td></tr>
<tr class="separator:ace5880acfab168e16e2a4f7216a99d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0ae4011a0bc039f5d3b54c7c7c513a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#add0ae4011a0bc039f5d3b54c7c7c513a">RxHandler</a> (void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgValue, void *pvMsgData)</td></tr>
<tr class="memdesc:add0ae4011a0bc039f5d3b54c7c7c513a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the receive events of the serial device.  <a href="#add0ae4011a0bc039f5d3b54c7c7c513a">More...</a><br /></td></tr>
<tr class="separator:add0ae4011a0bc039f5d3b54c7c7c513a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79221d2c33678c6ef718b579bebeb3e6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a79221d2c33678c6ef718b579bebeb3e6">handleGeneralRequests</a> (uint8_t *symbol, <a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89">State</a> *state)</td></tr>
<tr class="memdesc:a79221d2c33678c6ef718b579bebeb3e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle general requests which can receive any time.  <a href="#a79221d2c33678c6ef718b579bebeb3e6">More...</a><br /></td></tr>
<tr class="separator:a79221d2c33678c6ef718b579bebeb3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">main program executed at start.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad1a98fdb351d9710f2edc059b29c537b"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad1a98fdb351d9710f2edc059b29c537b">START_DELAY</a> = 1000</td></tr>
<tr class="separator:ad1a98fdb351d9710f2edc059b29c537b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd67bd1b44b7f0b5447b6d9581c97ddb"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#abd67bd1b44b7f0b5447b6d9581c97ddb">WAIT_FOR_HOST_KONFIGURATION</a> = 500</td></tr>
<tr class="separator:abd67bd1b44b7f0b5447b6d9581c97ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a098e039fa03d9b534f6ddd4ba9774691"><td class="memItemLeft" align="right" valign="top">volatile const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a098e039fa03d9b534f6ddd4ba9774691">WAIT_LOG_IN</a> = 400</td></tr>
<tr class="separator:a098e039fa03d9b534f6ddd4ba9774691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4a116aa2786ad9a6bd79888d997ec8"><td class="memItemLeft" align="right" valign="top">volatile const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a5d4a116aa2786ad9a6bd79888d997ec8">WAIT_LOG_IN_LONG</a> = 3000</td></tr>
<tr class="separator:a5d4a116aa2786ad9a6bd79888d997ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af92a994b377d73ef7dae1349a4092d2e"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af92a994b377d73ef7dae1349a4092d2e">ENTER_DELAY</a> = 350</td></tr>
<tr class="separator:af92a994b377d73ef7dae1349a4092d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29feca1f513f25655e5175ed67cab1a6"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a29feca1f513f25655e5175ed67cab1a6">LINUX</a> = 'L'</td></tr>
<tr class="separator:a29feca1f513f25655e5175ed67cab1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8282414d3be1f9fdd95bddbde67e9037"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8282414d3be1f9fdd95bddbde67e9037">LOG_WINDOWS</a> = 'b'</td></tr>
<tr class="separator:a8282414d3be1f9fdd95bddbde67e9037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473f029fc238f651bef4f52537bc26cf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a473f029fc238f651bef4f52537bc26cf">currentUid</a> [] = {0,0,0,0}</td></tr>
<tr class="separator:a473f029fc238f651bef4f52537bc26cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b8ee2be9ae2de7aa447fe616e2ad1a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a90b8ee2be9ae2de7aa447fe616e2ad1a">cardMissing</a> = 0</td></tr>
<tr class="separator:a90b8ee2be9ae2de7aa447fe616e2ad1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293b14961d56c9776caaa2f4310a034a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a293b14961d56c9776caaa2f4310a034a">ui32TxCount</a></td></tr>
<tr class="separator:a293b14961d56c9776caaa2f4310a034a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb35e386fd67bf724e6ed266393712fd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afb35e386fd67bf724e6ed266393712fd">os</a> = 0</td></tr>
<tr class="separator:afb35e386fd67bf724e6ed266393712fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7fc77aa9651a2720d0a45587c623593"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af7fc77aa9651a2720d0a45587c623593">singleUser</a> = 0</td></tr>
<tr class="separator:af7fc77aa9651a2720d0a45587c623593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ca5c84c783519b55beec875ef45f1f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af2ca5c84c783519b55beec875ef45f1f">SYSTICKS_PER_SECOND</a> = 100</td></tr>
<tr class="separator:af2ca5c84c783519b55beec875ef45f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3a42cd61d8379b51e27d0a904a6157"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4b3a42cd61d8379b51e27d0a904a6157">MISSING_CARD_MAX</a> = 30</td></tr>
<tr class="separator:a4b3a42cd61d8379b51e27d0a904a6157"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5ae56cb6a634afce913506ca6db1e0db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae56cb6a634afce913506ca6db1e0db">&#9670;&nbsp;</a></span>TARGET_IS_BLIZZARD_RB1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TARGET_IS_BLIZZARD_RB1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a887ec76db4f4aa156c159988294a5dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887ec76db4f4aa156c159988294a5dc7">&#9670;&nbsp;</a></span>CommandCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="main_8cpp.html#a887ec76db4f4aa156c159988294a5dc7">CommandCode</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Command code which could be received by the host. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a91bbb660ffee15227f9a0a73792eaa7f"></a>SINGLE_USER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a1bcf9f8d8e8a50733d63588d20bfaec0"></a>ASK_FOR_PW&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a4e82e5f475aa8266e2fb983667bb3f83"></a>OS_SYSTEM&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7aa6afed6b88eb0dd02e88319883c1ada0"></a>READ_UID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a25f902638ca8552deac6b00f71d72168"></a>HOST_STATUS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a3e5928fcfe26233db7178345569b7ab5"></a>USER_QUANTITY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a887ec76db4f4aa156c159988294a5dc7a960c2b426ae17f0a9cbaa415179e6de0"></a>END_REQUEST&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="ae9c42c594bb848c81ace2ff29f64dc89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c42c594bb848c81ace2ff29f64dc89">&#9670;&nbsp;</a></span>State</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89">State</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>States the device can have. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae9c42c594bb848c81ace2ff29f64dc89a13d000b4d7dc70d90239b7430d1eb6b2"></a>START&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9c42c594bb848c81ace2ff29f64dc89a6b4af979c9694e48f340397ac08dfd1c"></a>LOCKED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9c42c594bb848c81ace2ff29f64dc89addce3eb76352dcd28468b1a5e7ee2c27"></a>WAIT_FOR_PW&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9c42c594bb848c81ace2ff29f64dc89a4ade5a087dd858a01c36ce7ad8f64e36"></a>UNLOCKED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9c42c594bb848c81ace2ff29f64dc89a2ea7e5ce3432a623cdd366c46a0e1675"></a>VALIDATE_HOST_LOCKED&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac186ec772710562bab386f3f7d363cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac186ec772710562bab386f3f7d363cf2">&#9670;&nbsp;</a></span>configureUSB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configureUSB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the USB pins.</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="af7024f193dde44e5e4628726b4d5e05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7024f193dde44e5e4628726b4d5e05f">&#9670;&nbsp;</a></span>ControlHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ControlHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvCBData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsgValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvMsgData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the default USB-Events of the serial device. </p>

</div>
</div>
<a id="aadc4540eac008b25ebb9ca83a91fe94d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadc4540eac008b25ebb9ca83a91fe94d">&#9670;&nbsp;</a></span>delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delays in ms given time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>Time to wait in ms</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="a79221d2c33678c6ef718b579bebeb3e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79221d2c33678c6ef718b579bebeb3e6">&#9670;&nbsp;</a></span>handleGeneralRequests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t handleGeneralRequests </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>symbol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main_8cpp.html#ae9c42c594bb848c81ace2ff29f64dc89">State</a> *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle general requests which can receive any time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol</td><td>Current read symbol </td></tr>
    <tr><td class="paramname">state</td><td>Current state of the system</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t - 1 indicates that changes were done and a new symbol was read. </dd></dl>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main program executed at start. </p>
<p>To use Serial Communication connect to com port with baud 115200 Sets up the usb devices and the rfid reader and starts the main loop. The main loop represents the state machine.</p>
<dl class="section return"><dt>Returns</dt><dd>int - exit status code </dd></dl>

</div>
</div>
<a id="add0ae4011a0bc039f5d3b54c7c7c513a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0ae4011a0bc039f5d3b54c7c7c513a">&#9670;&nbsp;</a></span>RxHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t RxHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvCBData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsgValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvMsgData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the receive events of the serial device. </p>

</div>
</div>
<a id="ace5880acfab168e16e2a4f7216a99d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5880acfab168e16e2a4f7216a99d2a">&#9670;&nbsp;</a></span>TxHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t TxHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvCBData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsgValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvMsgData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the transmit events of the serial device. </p>

</div>
</div>
<a id="a44e60edf201aebcf91f67dfab8235753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44e60edf201aebcf91f67dfab8235753">&#9670;&nbsp;</a></span>USBEventHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBEventHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvCBData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsgParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvMsgData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the default USB-Events of the keyboard device. </p>

</div>
</div>
<a id="a6da4e5e6b4d6b2a97dfea3652276a7dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da4e5e6b4d6b2a97dfea3652276a7dc">&#9670;&nbsp;</a></span>USBKeyboardHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBKeyboardHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvCBData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsgParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvMsgData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the keyboard events of the keyboard device. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a90b8ee2be9ae2de7aa447fe616e2ad1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b8ee2be9ae2de7aa447fe616e2ad1a">&#9670;&nbsp;</a></span>cardMissing</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t cardMissing = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Counter increased when currentUid is missing. </p>

</div>
</div>
<a id="a473f029fc238f651bef4f52537bc26cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a473f029fc238f651bef4f52537bc26cf">&#9670;&nbsp;</a></span>currentUid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t currentUid[] = {0,0,0,0}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Currently logged UID. </p>

</div>
</div>
<a id="af92a994b377d73ef7dae1349a4092d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af92a994b377d73ef7dae1349a4092d2e">&#9670;&nbsp;</a></span>ENTER_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int ENTER_DELAY = 350</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Short delay after pressing enter. </p>

</div>
</div>
<a id="a29feca1f513f25655e5175ed67cab1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29feca1f513f25655e5175ed67cab1a6">&#9670;&nbsp;</a></span>LINUX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t LINUX = 'L'</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Code for a LINUX System </p>

</div>
</div>
<a id="a8282414d3be1f9fdd95bddbde67e9037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8282414d3be1f9fdd95bddbde67e9037">&#9670;&nbsp;</a></span>LOG_WINDOWS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t LOG_WINDOWS = 'b'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b3a42cd61d8379b51e27d0a904a6157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3a42cd61d8379b51e27d0a904a6157">&#9670;&nbsp;</a></span>MISSING_CARD_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t MISSING_CARD_MAX = 30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Time until the card is identified as lost </p>

</div>
</div>
<a id="afb35e386fd67bf724e6ed266393712fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb35e386fd67bf724e6ed266393712fd">&#9670;&nbsp;</a></span>os</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t os = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The code of the operating system of the host. </p>

</div>
</div>
<a id="af7fc77aa9651a2720d0a45587c623593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7fc77aa9651a2720d0a45587c623593">&#9670;&nbsp;</a></span>singleUser</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t singleUser = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The code of the single user. </p>

</div>
</div>
<a id="ad1a98fdb351d9710f2edc059b29c537b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a98fdb351d9710f2edc059b29c537b">&#9670;&nbsp;</a></span>START_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int START_DELAY = 1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delay before configuring the usb-device </p>

</div>
</div>
<a id="af2ca5c84c783519b55beec875ef45f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ca5c84c783519b55beec875ef45f1f">&#9670;&nbsp;</a></span>SYSTICKS_PER_SECOND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int SYSTICKS_PER_SECOND = 100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The system tick timer period. </p>

</div>
</div>
<a id="a293b14961d56c9776caaa2f4310a034a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a293b14961d56c9776caaa2f4310a034a">&#9670;&nbsp;</a></span>ui32TxCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ui32TxCount</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TxCounter to find out if new data was transmitted </p>

</div>
</div>
<a id="abd67bd1b44b7f0b5447b6d9581c97ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd67bd1b44b7f0b5447b6d9581c97ddb">&#9670;&nbsp;</a></span>WAIT_FOR_HOST_KONFIGURATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int WAIT_FOR_HOST_KONFIGURATION = 500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delay before main-loop, so windows has time to detect the deviceDelay waited before the. </p>

</div>
</div>
<a id="a098e039fa03d9b534f6ddd4ba9774691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a098e039fa03d9b534f6ddd4ba9774691">&#9670;&nbsp;</a></span>WAIT_LOG_IN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int WAIT_LOG_IN = 400</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delay after logging in the single user. </p>

</div>
</div>
<a id="a5d4a116aa2786ad9a6bd79888d997ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d4a116aa2786ad9a6bd79888d997ec8">&#9670;&nbsp;</a></span>WAIT_LOG_IN_LONG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int WAIT_LOG_IN_LONG = 3000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delay after logging in the multi user. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
